# Neuro-Master 本番運用前チェックリスト (v1.0)

このリストは、現在のプロトタイプ状態から安定した本番運用（Production）へ移行するために最低限必要な項目を具体化したものです。

---

## 🏗️ 1. 基盤・信頼性 (Reliability)
- [ ] **デプロイメントの自動化 (CI/CD)**: 
  - GitHub Actions 等を導入し、`npm run lint` および `npm run build` が通らない限り本番へマージできない「Quality Gate」を設置する。
- [ ] **リトライ戦略の実装**:
  - GCSアップロードやSupabaseへの保存がネットワークエラーで一時的に失敗した場合の自動リトライ（指数バックオフ）をフロントエンドに実装。
- [ ] **デッドレターキュー (DLQ) の設定**:
  - Pub/Subでの解析/DSPトリガーが失敗した場合の再試行回数制限と、失敗ログ専用のトピックを用意。

## 🧠 2. AI 解析エンジンの高度化 (Audio Analysis)
- [ ] **真のマルチエージェント化**:
  - 現在の「単一Geminiによるロールプレイ」から、異なる特徴を持つモデル（例: 解析は Gemini Fast、審美眼は Claude 3.5 Sonnet、技術判断は GPT-4o）への分散を検討。
- [ ] **プロンプトの堅牢化**:
  - OutputをJSON Schemaで厳密に固定し、パースエラー（Unexpected token A...等）をゼロにする。Vertex AIの Response Schema 機能を活用。

## 🎛️ 3. DSP & マスタリング (Engine)
- [ ] **スケーラビリティの検証**:
  - 同時リクエスト時にCloud Runインスタンスが適切にスケールし、リソース（メモリ/CPU）が枯渇しないか負荷試験を実施。
- [ ] **エラー通知の監視**:
  - 処理失敗時に Sentry や GCP Cloud Logging で即座にアラートが飛ぶ体制を構築する。

## 🔐 4. セキュリティ & コンプライアンス
- [ ] **サービスアカウントの権限最小化**:
  - 現在使用している `sa-key.json` の権限が、特定のバケットとPub/Subトピックのみに絞られているか再確認。
- [ ] **CORS設定の厳密化**:
  - `cors.json` で許可するドメインを `*` ではなく、本番ドメインに限定する。
- [ ] **容量制限の強制**:
  - フロントエンドだけでなく、APIレベルでファイルサイズの上限（例: 200MB）をバリデーション。

## 📊 5. 運用監視 (Observability)
- [ ] **ジョブ進捗の可視化 (Dashboard)**:
  - 管理者が現在のキューの状態や、エージェントの合議内容の傾向を監視できる簡易ダッシュボード。
- [ ] **構造化ログの導入**:
  - 全てのログを JSON 形式で出力し、BigQuery 経由で解析時間を分析できるようにする。
